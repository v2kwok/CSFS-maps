<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Carrier Sekani Wildfires</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<link href="https://api.mapbox.com/mapbox-gl-js/v2.7.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.7.0/mapbox-gl.js"></script>
<style>
	body { margin: 0; padding: 0; }
	#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>

</head>
<body>
<style>

/*All code below this is CSS. Key elements are map, sidebar, time slider, search bar, rcp buttons and graphs*/
body {
  margin: 0;
  padding: 0;
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
}
#map {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;
}

h1 {
  font-size: 26px;
  line-height: 30px;
}

h2 {
  font-size: 14px;
  line-height: 20px;
  margin-bottom: 10px;
}

a {
  text-decoration: none;
  color: #2dc4b2;
}

.Fire-info {
  position: absolute;
  font-family: sans-serif;
  margin-top: 5px;
  right: 5px;
  padding: 5px;
  width: 15%;
  border: 2px solid black;
  font-size: 14px;
  color: #222;
  background-color: #fff;
  border-radius: 3px;
}

/*All code below this is for the dropdown button*/
	.dropbtn {
		background-color: #D22630;
		color: white;
		padding: 16px;
		font-size: 16px;
		width: 262px;
		position: absolute;
		left: 10px;
		top: 5px;
		border: none;
		cursor: pointer;
	}

	.dropbtn:hover, .dropbtn:focus {
		background-color: #ffffff;
		color: #D22630;
	}

	#myInput {
		box-sizing: border-box;
		background-position: 14px 12px;
		background-repeat: no-repeat;
		font-size: 16px;
		padding: 14px 20px 12px 45px;
		border: none;
		border-bottom: 1px solid #ddd;
		position: relative;
	}

	#myInput:focus {outline: 3px solid #ddd;}

	.dropdown {
		position: relative;
		display: inline-block;
	}

	.dropdown-content {
		display: none;
		position: absolute;
		left: 10px;
		background-color: #f6f6f6;
		min-width: 230px;
		border: 1px solid #ddd;
		z-index: 1;
	}

	.dropdown-content a {
		color: black;
		padding: 12px 16px;
		text-decoration: none;
		display: block;
	}

	.dropdown-content a:hover {background-color: #D22630}
	.dropdown-content a:hover {color: #ffffff}

	.show {display:block;}

	.map-overlay4 {
		position: absolute;
		top: 155px;
		right: 5px;
		background: #5e8262;
		font-family: Arial, sans-serif;
		overflow: auto;
		display: inline-block;
		border: 2px solid black;
	  font-size: 14px;
	  color: #222;
	  background-color: #fff;
	  border-radius: 3px;
	}

	#features4 {
		top: 10;
		height: 20%;
		margin-top: 20px;
		width: 15.6%;
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);
	}

	.session {
		margin-bottom: 15px;
		margin: 5px;
	}

	.row {
		height: 12px;
		width: 90%
	}

	.colors {
		background: linear-gradient(to right, #00B050, #FFC000, #FF9900, #FF0000, #7030A0, #660066);
		margin-bottom: 5px;
		margin-left: 5px;
		opacity: 0.5;
	}

	.label {
		width: 15.1%;
		display: inline-block;
			text-align: center;
		font-size: 8.5px;
	}

	.map-overlay5 {
		position: absolute;
		top: 370px;
		right: 5px;
		background: #5e8262;
		font-family: Arial, sans-serif;
		overflow: auto;
		display: inline-block;
		border: 2px solid black;
		font-size: 14px;
		color: #222;
		background-color: #fff;
		border-radius: 3px;
	}

	#features5 {
		top: 110;
		height: 10%;
		margin-top: 20px;
		width: 15.6%;
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);
	}

	.map-overlay6 {
		position: absolute;
		top: 70px;
		left: 10px;
		background: #5e8262;
		font-family: Arial, sans-serif;
		overflow: auto;
		display: inline-block;
		border: 2px solid black;
		font-size: 14px;
		color: #222;
		background-color: #fff;
		border-radius: 3px;
	}

	#features6 {
		top: 70px;
		height: 80%;
		margin-top: 20px;
		padding-left: 10px;
		width: 27.2%;
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);
	}

	.legend label,
	.legend span {
  	display:block;
  	float:left;
  	height:25px;
  	width:80%;
  	text-align:center;
  	font-size:9px;
  	color:#808080;
  }

	.legend {
	background-color: #fff;
	border-radius: 3px;
	top: 10px;
	font: 14px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
	padding: 5px;
	position: absolute;
	left: 5px;
	z-index: 1;
	}

	.legend h4 {
	margin: 0 0 10px;
	}

	.legend div span {
	border-radius: 50%;
	display: inline-block;
	height: 15px;
	margin-right: 5px;
	width: 15px;
	}

</style>

<div id='map'></div>


<div class='Fire-info' id='FirePopup'>
  <div><strong>Colloquial Fire Name:</strong> <span id='FireName'></span></div><br>
  <div><strong>Hectares Burned:</strong> <span id='HectaresBurned'></span></div><br>
	<div><strong>Date Started:</strong> <span id='DateStart'></span></div><br>
  <div><strong>Date Out:</strong> <span id='DateOut'></span></div>
</div>


<div class="dropdown">
  <button onclick="myFunction()" class="dropbtn"><b>Select Community</b></button>
  <div id="myDropdown" class="dropdown-content">
    <input type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">
    <a href="#BurnsLake" id = burnslake>Burns Lake</a>
		<a href="#Wet'suwet'en" id = wetsuweten>Wet'suwet'en</a>
		<a href="#Saikuz" id = saikuz>Saik'uz</a>
		<a href="#Nadleh" id = nadleh>Nadleh Whut'en</a>
		<a href="#Stellaten" id = stellaten>Stellat'en</a>
		<a href="#LBWoyenne" id = lbwoyenne>Lake Babine - Woyenne</a>
		<a href="#LBTachet" id = lbtachet>Lake Babine - Tachet</a>
		<a href="#NeeTahiBuhn" id = neetahibuhn>Nee Tahi-Buhn</a>
		<a href="#Cheslatta" id = cheslatta>Cheslatta Carrier</a>
		<a href="#SkinTyee" id = skintyee>Skin Tyee</a>
		<a href="#TaklaLake" id = taklalake>Takla Lake</a>
		<a href="#Yekooche" id = yekooche>Yekooche</a>
		<a href="#FortBabine" id = fortbabine>Fort Babine</a>
  </div>
</div>


<div class='map-overlay4' id='features4'><p style="color:#ffffff">
	<div class='session' id='sliderbar'>
		<h2>Date: <label id='active-date'>04/26/2018</label></h2>
		<input id='slider' class='row' type='range' min='1' max='37' step='1' value='1'/>
</div>
<div class='session'>
  <h2>PM2.5 Air Pollution Level</h2>
  <div class='row colors'>
  </div>
  <div class='row labels'>
    <div class='label'>Good</div>
    <div class='label'>Moderate</div>
    <div class='label'>Unhealthy for Sensitive Groups</div>
    <div class='label'>Unhealthy</div>
    <div class='label'>Very Unhealthy</div>
    <div class='label'>Hazardous</div>
  </div>
</div>
</div>


<div class='map-overlay5' id='features5'><p style="color:#ffffff">
	<div id="state-legend" class="legend">
	<h4>Map Legend</h4>
	<div><span style="background-color: #050505"></span>CSFS Community</div>
	<div><span style="background-color: #45e87e"></span>Provincial Air Sensor</div>
  </div>
</div>


<div class='map-overlay6' id='features6'><p style="color:#ffffff">
	<H1 id="CommunityTitle"></H1>
	<img id="BurnsLakeGraph" src="https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/graphs/Burns_Lake.png" alt="Burns Lake 2018" style="width:508px;height:302px">
	<img id="WetsuwetenGraph" src="https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/graphs/Wetsuweten.png" alt="Wet'suwet'en 2018" style="width:508px;height:302px">
	<img id="CheslattaGraph" src="https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/graphs/Cheslatta.png" alt="Cheslatta 2018" style="width:508px;height:302px">
	<img id="FortBabineGraph" src="https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/graphs/FortBabine.png" alt="Fort Babine 2018" style="width:508px;height:302px">
	<img id="NadlehGraph" src="https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/graphs/Nadleh.png" alt="Nadleh 2018" style="width:508px;height:302px">
	<img id="NeeTahiBuhnGraph" src="https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/graphs/NeeTahiBuhn.png" alt="Nee Tahi-Buhn 2018" style="width:508px;height:302px">
	<img id="SaikuzGraph" src="https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/graphs/Saikuz.png" alt="Saik'uz 2018" style="width:508px;height:302px">
	<img id="SkinTyeeGraph" src="https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/graphs/SkinTyee.png" alt="Skin Tyee 2018" style="width:508px;height:302px">
	<img id="StellatenGraph" src="https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/graphs/Stellaten.png" alt="Stellat'en 2018" style="width:508px;height:302px">
	<img id="TachetGraph" src="https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/graphs/Tachet.png" alt="Lake Babine - Tachet 2018" style="width:508px;height:302px">
	<img id="TaklaGraph" src="https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/graphs/Takla.png" alt="Takla Lake 2018" style="width:508px;height:302px">
	<img id="WoyenneGraph" src="https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/graphs/Woyenne.png" alt="Lake Babine - Woyenne 2018" style="width:508px;height:302px">
	<img id="YekoocheGraph" src="https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/graphs/Yekooche.png" alt="Yekooche 2018" style="width:508px;height:302px">
	<H3 id="DaysAbove35"></H3>
	<H3 id="DaysAbove55"></H3>
	<H3 id="DaysAbove150"></H3>
	<H3 id="DaysAbove350"></H3>
	<p id="FireSeasonDescription"></p>
	<p id="FireSeasonDescription2"></p>
	<p id="FireSeasonDescription3"></p>

</div>

<script>

//Access token for Camp Lab Mapbox account
mapboxgl.accessToken = 'pk.eyJ1IjoiZnJhbmNvY3Jvc3NvMTMiLCJhIjoiY2wwaHIxc2FqMGJhczNqcWhjcmc5dng0NSJ9.IYMY8BJX7JNcbPcebCJsOg';

// centred on CSFS Territory
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/francocrosso13/cl1nyqi3v00ah14nws3mxb6kf',
    zoom: 6.47,
    center: [-125.508, 55.250],
    minZoom: 4
    });

//hide place info pop up
document.getElementById('features6').style.display = 'none';

//Popup for the top right corner showing fire information
const NameDisplay = document.getElementById('FireName');
const HectaresBurnedDisplay = document.getElementById('HectaresBurned');
const DateStartDisplay = document.getElementById("DateStart");
const DateOutDisplay = document.getElementById('DateOut');

  //air quality data loaded in several polygons
	map.on('load', () => {
	map.addSource('PM25_Data', {
		'type': 'geojson',
		'data': "https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/data/airqualitydata/csfs_2018_pollution.geojson"
	});
	map.addLayer({
		'id': 'PM25_2018',
		'type': 'fill',
		'source': 'PM25_Data', // reference the data source
		'layout': {},
		'paint': {
			'fill-color': {
				property: 'Pollution_Level',
				stops: [[1, '#00B050'], [2, '#FFC000'],[3, '#FF9900'], [4, '#FF0000'],[5, '#7030A0'], [6, '#660066']] //colour scheme matches WHO air pollution  index
			},
			'fill-opacity': 0.25

		},
		filter:  ['==', ['number', ['get', 'Week_Number']], 1] //sets map to first week of fire season
		});
		map.moveLayer('PM25_2018', 'communities');
		//map.moveLayer('PM25_2018', 'sensors');
	});

  //load fire polygons for 2018 fire season
  map.on('load', () => {
  map.addSource('Fires_Data', {
    'type': 'geojson',
    'data': "https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/Fires_CSFS.geojson"
  });
	map.addLayer({
		'id': 'Fires_CSFS',
		'type': 'fill',
		'source': 'Fires_Data', // reference the data source
		'layout': {},
		'paint': {
			'fill-color': '#FF0000', // red color fill
			'fill-opacity': 0.8,
			'fill-outline-color': '#FF0000'

		},
		filter:  ['==', ['number', ['get', 'Fire_Weeks_Week_Start']], 1] //set to first week of fire season
		});
		map.moveLayer('Fires_Data', 'communities');
	});

  //loads CSFS area boundary
	map.on('load', () => {
  map.addSource('CSFS_Border', {
    'type': 'geojson',
    'data': "https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/csfs_border.geojson"
  });
	map.addLayer({
		'id': 'CSFS',
		'type': 'line',
		'source': 'CSFS_Border', // reference the data source
		'layout': {},
		'paint': {
			'line-color': '#D22630',
			'line-width': 3
		}
	})
	});

  //Place labels for large towns
	const places = {
	'type': 'FeatureCollection',
	'features': [{
		'type': 'Feature',
			'properties': {
			'description': "Prince George",
			'icon': 'theatre-15'},
			'geometry': {
				'type': 'Point',
				'coordinates': [-122.7497, 53.9171]}},

				{'type': 'Feature',
						'properties': {
						'description': "Vanderhoof",
						'icon': 'theatre-15'},
						'geometry': {
							'type': 'Point',
							'coordinates': [-124.0130, 54.0140]}},

				{'type': 'Feature',
									'properties': {
									'description': "Burns Lake",
									'icon': 'theatre-15'},
									'geometry': {
										'type': 'Point',
										'coordinates': [-125.7636, 54.2344]}},

										{'type': 'Feature',
															'properties': {
															'description': "Smithers",
															'icon': 'theatre-15'},
															'geometry': {
																'type': 'Point',
																'coordinates': [-127.1686, 54.7824]}}
]};

//load place labels
map.on('load', () => {
// Add a GeoJSON source containing place coordinates and information.
map.addSource('places', {
'type': 'geojson',
'data': places
});

map.addLayer({
'id': 'poi-labels',
'type': 'symbol',
'source': 'places',
'layout': {
'text-field': ['get', 'description'],
'text-variable-anchor': ['top', 'bottom', 'left', 'right'],
'text-radial-offset': 1.0,
'text-justify': 'auto',
'icon-image': ['get', 'icon']
}
});
});

//loads the point data of the air quality sensors
map.on('load', () => {
map.addSource('ems_stations', {
type: 'geojson',
// Use a URL for the value for the `data` property.
data: 'https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/data/airqualitydata/ems_stations.geojson'
});

map.addLayer({
'id': 'ems_stations_layer',
'type': 'circle',
'source': 'ems_stations',
'paint': {
'circle-radius': 6,
'circle-stroke-width': 2,
'circle-color': '#45e87e',
'circle-stroke-color': 'black'
}
});
});

		// pair of functions to harvest input from species search bar. ALso pulled from stack overflow
		function myFunction() {
		  document.getElementById("myDropdown").classList.toggle("show");
		}
		function filterFunction() {
		  var input, filter, ul, li, a, i;
		  input = document.getElementById("myInput");
		  filter = input.value.toUpperCase();
		  div = document.getElementById("myDropdown");
		  a = div.getElementsByTagName("a");
		  for (i = 0; i < a.length; i++) {
		    txtValue = a[i].textContent || a[i].innerText;
		    if (txtValue.toUpperCase().indexOf(filter) > -1) {
		      a[i].style.display = "";
		    } else {
		      a[i].style.display = "none";
		    }
		  }
		}

//adjusts sidebar for Burns Lake view if that is selected by user
document.getElementById('burnslake').addEventListener('click', () => {
	document.getElementById('features6').style.display = 'inline';
  map.setLayoutProperty('sensors', 'visibility', 'none');
	document.getElementById('CommunityTitle').innerText = "Burns Lake 2018 Fire Season Review"
	document.getElementById('DaysAbove35').innerText = "Days Above 35 µg/m3 (Unhealthy for Sensitive Groups): 17"
	document.getElementById('DaysAbove55').innerText = "Days Above 55 µg/m3 (Unhealthy): 9"
	document.getElementById('DaysAbove150').innerText = "Days Above 150 µg/m3 (Very Unhealthy): 3"
	document.getElementById('DaysAbove350').innerText = "Days Above 350 µg/m3 (Hazardous): 1"
	document.getElementById("DaysAbove35").style.color = '#FF9900'
	document.getElementById("DaysAbove55").style.color = '#FF0000'
	document.getElementById("DaysAbove150").style.color = '#7030A0'
	document.getElementById("DaysAbove350").style.color = '#660066'
	document.getElementById('BurnsLakeGraph').style.display = 'inline';
	document.getElementById('WetsuwetenGraph').style.display = 'none';
	document.getElementById('SaikuzGraph').style.display = 'none';
	document.getElementById('NadlehGraph').style.display = 'none';
	document.getElementById('StellatenGraph').style.display = 'none';
	document.getElementById('WoyenneGraph').style.display = 'none';
	document.getElementById('TachetGraph').style.display = 'none';
	document.getElementById('NeeTahiBuhnGraph').style.display = 'none';
	document.getElementById('CheslattaGraph').style.display = 'none';
	document.getElementById('SkinTyeeGraph').style.display = 'none';
	document.getElementById('TaklaGraph').style.display = 'none';
	document.getElementById('YekoocheGraph').style.display = 'none';
	document.getElementById('FortBabineGraph').style.display = 'none';
	document.getElementById('FireSeasonDescription').innerText = "While the community of Burns Lake was not directly threatened by the Shovel Lake Fire that took place to the East of the town, it did face sustained unhealthy levels of PM 2.5 air pollution. The entire town experienced at least 9 days of sustained unhealthy air quality levels, while sensitive groups were exposed for double this."
	document.getElementById('FireSeasonDescription2').innerText = " "
	document.getElementById('FireSeasonDescription3').innerText = "The levels seen in Burns Lake may not have been as bad as seen in the surrounding communities, however there was still a very real threat to respiratory health of community members. It is vital that warnings and advice are given in similar scenarios going forward."
	map.setLayoutProperty('BurnsLakeRed', 'visibility', 'visible')
	map.setLayoutProperty('WetsuwetenRed', 'visibility', 'none')
	map.setLayoutProperty('SaikuzRed', 'visibility', 'none')
	map.setLayoutProperty('NadlehRed', 'visibility', 'none')
	map.setLayoutProperty('StellatenRed', 'visibility', 'none')
	map.setLayoutProperty('WoyenneRed', 'visibility', 'none')
	map.setLayoutProperty('TachetRed', 'visibility', 'none')
	map.setLayoutProperty('NeeTahiBuhnRed', 'visibility', 'none')
	map.setLayoutProperty('CheslattaRed', 'visibility', 'none')
	map.setLayoutProperty('SkinTyeeRed', 'visibility', 'none')
	map.setLayoutProperty('TaklaRed', 'visibility', 'none')
	map.setLayoutProperty('YekoocheRed', 'visibility', 'none')
	map.setLayoutProperty('FortBabineRed', 'visibility', 'none')

})

//adjusts sidebar for wetsuweten view if that is selected by user
document.getElementById('wetsuweten').addEventListener('click', () => {
	document.getElementById('features6').style.display = 'inline';
  map.setLayoutProperty('sensors', 'visibility', 'none');
	document.getElementById('CommunityTitle').innerText = "Wet'suwet'en 2018 Fire Season Review"
	document.getElementById('DaysAbove35').innerText = "Days Above 35 µg/m3 (Unhealthy for Sensitive Groups): 16"
	document.getElementById('DaysAbove55').innerText = "Days Above 55 µg/m3 (Unhealthy): 9"
	document.getElementById('DaysAbove150').innerText = "Days Above 150 µg/m3 (Very Unhealthy): 3"
	document.getElementById('DaysAbove350').innerText = "Days Above 350 µg/m3 (Hazardous): 1"
	document.getElementById("DaysAbove35").style.color = '#FF9900'
	document.getElementById("DaysAbove55").style.color = '#FF0000'
	document.getElementById("DaysAbove150").style.color = '#7030A0'
	document.getElementById("DaysAbove350").style.color = '#660066'
	document.getElementById('BurnsLakeGraph').style.display = 'none';
	document.getElementById('WetsuwetenGraph').style.display = 'inline';
	document.getElementById('SaikuzGraph').style.display = 'none';
	document.getElementById('NadlehGraph').style.display = 'none';
	document.getElementById('StellatenGraph').style.display = 'none';
	document.getElementById('WoyenneGraph').style.display = 'none';
	document.getElementById('TachetGraph').style.display = 'none';
	document.getElementById('NeeTahiBuhnGraph').style.display = 'none';
	document.getElementById('CheslattaGraph').style.display = 'none';
	document.getElementById('SkinTyeeGraph').style.display = 'none';
	document.getElementById('TaklaGraph').style.display = 'none';
	document.getElementById('YekoocheGraph').style.display = 'none';
	document.getElementById('FortBabineGraph').style.display = 'none';
	document.getElementById('FireSeasonDescription').innerText = "Much alike the nearby Burns Lake community, the Wet’suwet’en community did not experience the worst that the 2018 fire season had to offer, especially when compared to other CSFS nations who were downwind of the Shovel Lake Fire. The Wet’suwet’en location to North West of the major nearby fires meant that they were able to escape the extreme pollution levels seen by other nations in August 2018. "
	document.getElementById('FireSeasonDescription2').innerText = " "
	document.getElementById('FireSeasonDescription3').innerText = "Nonetheless, they did experience sustained levels of high PM2.5 over the season. Sensitive individuals were exposed for over 16 days, while the rest of the community still experienced several days of high pollution levels that ranged from unhealthy (9 days) to hazardous (1 day). "
	map.setLayoutProperty('BurnsLakeRed', 'visibility', 'none')
	map.setLayoutProperty('WetsuwetenRed', 'visibility', 'visible')
	map.setLayoutProperty('SaikuzRed', 'visibility', 'none')
	map.setLayoutProperty('NadlehRed', 'visibility', 'none')
	map.setLayoutProperty('StellatenRed', 'visibility', 'none')
	map.setLayoutProperty('WoyenneRed', 'visibility', 'none')
	map.setLayoutProperty('TachetRed', 'visibility', 'none')
	map.setLayoutProperty('NeeTahiBuhnRed', 'visibility', 'none')
	map.setLayoutProperty('CheslattaRed', 'visibility', 'none')
	map.setLayoutProperty('SkinTyeeRed', 'visibility', 'none')
	map.setLayoutProperty('TaklaRed', 'visibility', 'none')
	map.setLayoutProperty('YekoocheRed', 'visibility', 'none')
	map.setLayoutProperty('FortBabineRed', 'visibility', 'none')

})

//adjusts sidebar for Saikuz view if that is selected by user
document.getElementById('saikuz').addEventListener('click', () => {
	document.getElementById('features6').style.display = 'inline';
  map.setLayoutProperty('sensors', 'visibility', 'none');
	document.getElementById('CommunityTitle').innerText = "Saik'uz 2018 Fire Season Review"
	document.getElementById('DaysAbove35').innerText = "Days Above 35 µg/m3 (Unhealthy for Sensitive Groups): 30"
	document.getElementById('DaysAbove55').innerText = "Days Above 55 µg/m3 (Unhealthy): 24"
	document.getElementById('DaysAbove150').innerText = "Days Above 150 µg/m3 (Very Unhealthy): 5"
	document.getElementById('DaysAbove350').innerText = "Days Above 350 µg/m3 (Hazardous): 1"
	document.getElementById("DaysAbove35").style.color = '#FF9900'
	document.getElementById("DaysAbove55").style.color = '#FF0000'
	document.getElementById("DaysAbove150").style.color = '#7030A0'
	document.getElementById("DaysAbove350").style.color = '#660066'
	document.getElementById('BurnsLakeGraph').style.display = 'none';
	document.getElementById('WetsuwetenGraph').style.display = 'none';
	document.getElementById('SaikuzGraph').style.display = 'inline';
	document.getElementById('NadlehGraph').style.display = 'none';
	document.getElementById('StellatenGraph').style.display = 'none';
	document.getElementById('WoyenneGraph').style.display = 'none';
	document.getElementById('TachetGraph').style.display = 'none';
	document.getElementById('NeeTahiBuhnGraph').style.display = 'none';
	document.getElementById('CheslattaGraph').style.display = 'none';
	document.getElementById('SkinTyeeGraph').style.display = 'none';
	document.getElementById('TaklaGraph').style.display = 'none';
	document.getElementById('YekoocheGraph').style.display = 'none';
	document.getElementById('FortBabineGraph').style.display = 'none';
	document.getElementById('FireSeasonDescription').innerText = "In terms of PM 2.5 air pollution, the Saik'uz community were the worst affected in the CSFS healthcare area. Their proximity to the Shovel Lake Fire, and location downwind from the fire meant that consistent unhealthy levels were seen throughout July, August and September. Sensitive groups were exposed for 30 days, while the general public had 24 days of unhealthy air quality."
	document.getElementById('FireSeasonDescription2').innerText = " "
	document.getElementById('FireSeasonDescription3').innerText = "It is vital that in future situations, in which sustained hazardous air quality occurs over a period of several days, that the community are immediately informed of the risk to their respiratory health, and are given the recommendation to evacuate if they feel they must do so."
	map.setLayoutProperty('BurnsLakeRed', 'visibility', 'none')
	map.setLayoutProperty('WetsuwetenRed', 'visibility', 'none')
	map.setLayoutProperty('SaikuzRed', 'visibility', 'visible')
	map.setLayoutProperty('NadlehRed', 'visibility', 'none')
	map.setLayoutProperty('StellatenRed', 'visibility', 'none')
	map.setLayoutProperty('WoyenneRed', 'visibility', 'none')
	map.setLayoutProperty('TachetRed', 'visibility', 'none')
	map.setLayoutProperty('NeeTahiBuhnRed', 'visibility', 'none')
	map.setLayoutProperty('CheslattaRed', 'visibility', 'none')
	map.setLayoutProperty('SkinTyeeRed', 'visibility', 'none')
	map.setLayoutProperty('TaklaRed', 'visibility', 'none')
	map.setLayoutProperty('YekoocheRed', 'visibility', 'none')
	map.setLayoutProperty('FortBabineRed', 'visibility', 'none')

})

//adjusts sidebar for Nadleh view if that is selected by user
document.getElementById('nadleh').addEventListener('click', () => {
	document.getElementById('features6').style.display = 'inline';
  map.setLayoutProperty('sensors', 'visibility', 'none');
	document.getElementById('CommunityTitle').innerText = "Nadleh Whut'en 2018 Fire Season Review"
	document.getElementById('DaysAbove35').innerText = "Days Above 35 µg/m3 (Unhealthy for Sensitive Groups): 28"
	document.getElementById('DaysAbove55').innerText = "Days Above 55 µg/m3 (Unhealthy): 16"
	document.getElementById('DaysAbove150').innerText = "Days Above 150 µg/m3 (Very Unhealthy): 4"
	document.getElementById('DaysAbove350').innerText = "Days Above 350 µg/m3 (Hazardous): 1"
	document.getElementById("DaysAbove35").style.color = '#FF9900'
	document.getElementById("DaysAbove55").style.color = '#FF0000'
	document.getElementById("DaysAbove150").style.color = '#7030A0'
	document.getElementById("DaysAbove350").style.color = '#660066'
	document.getElementById('BurnsLakeGraph').style.display = 'none';
	document.getElementById('WetsuwetenGraph').style.display = 'none';
	document.getElementById('SaikuzGraph').style.display = 'none';
	document.getElementById('NadlehGraph').style.display = 'inline';
	document.getElementById('StellatenGraph').style.display = 'none';
	document.getElementById('WoyenneGraph').style.display = 'none';
	document.getElementById('TachetGraph').style.display = 'none';
	document.getElementById('NeeTahiBuhnGraph').style.display = 'none';
	document.getElementById('CheslattaGraph').style.display = 'none';
	document.getElementById('SkinTyeeGraph').style.display = 'none';
	document.getElementById('TaklaGraph').style.display = 'none';
	document.getElementById('YekoocheGraph').style.display = 'none';
	document.getElementById('FortBabineGraph').style.display = 'none';
	document.getElementById('FireSeasonDescription').innerText = "The Nadleh Whut’en community were also strongly affected by the fire season in 2018. The Shovel Lake Fire came within close proximity of the community (∼5km). The community was consequently evacuated due to the danger that Shovel Lake presented. Yet, the threat from air quality was as dangerous to the community as the fire."
	document.getElementById('FireSeasonDescription2').innerText = " "
	document.getElementById('FireSeasonDescription3').innerText = "PM 2.5 levels did not drop below 35 µg/m3 for a month, leaving sensitive individuals very exposed. In Mid-August levels reached 594 µg/m3, leaving even the healthiest community members exposed to an extremely unhealthy air quality."
	map.setLayoutProperty('BurnsLakeRed', 'visibility', 'none')
	map.setLayoutProperty('WetsuwetenRed', 'visibility', 'none')
	map.setLayoutProperty('SaikuzRed', 'visibility', 'none')
	map.setLayoutProperty('NadlehRed', 'visibility', 'visible')
	map.setLayoutProperty('StellatenRed', 'visibility', 'none')
	map.setLayoutProperty('WoyenneRed', 'visibility', 'none')
	map.setLayoutProperty('TachetRed', 'visibility', 'none')
	map.setLayoutProperty('NeeTahiBuhnRed', 'visibility', 'none')
	map.setLayoutProperty('CheslattaRed', 'visibility', 'none')
	map.setLayoutProperty('SkinTyeeRed', 'visibility', 'none')
	map.setLayoutProperty('TaklaRed', 'visibility', 'none')
	map.setLayoutProperty('YekoocheRed', 'visibility', 'none')
	map.setLayoutProperty('FortBabineRed', 'visibility', 'none')

})

//adjusts sidebar for Stellat'en view if that is selected by user
document.getElementById('stellaten').addEventListener('click', () => {
	document.getElementById('features6').style.display = 'inline';
  map.setLayoutProperty('sensors', 'visibility', 'none');
	document.getElementById('CommunityTitle').innerText = "Stellat'en 2018 Fire Season Review"
	document.getElementById('DaysAbove35').innerText = "Days Above 35 µg/m3 (Unhealthy for Sensitive Groups): 25"
	document.getElementById('DaysAbove55').innerText = "Days Above 55 µg/m3 (Unhealthy): 13"
	document.getElementById('DaysAbove150').innerText = "Days Above 150 µg/m3 (Very Unhealthy): 3"
	document.getElementById('DaysAbove350').innerText = "Days Above 350 µg/m3 (Hazardous): 1"
	document.getElementById("DaysAbove35").style.color = '#FF9900'
	document.getElementById("DaysAbove55").style.color = '#FF0000'
	document.getElementById("DaysAbove150").style.color = '#7030A0'
	document.getElementById("DaysAbove350").style.color = '#660066'
	document.getElementById('BurnsLakeGraph').style.display = 'none';
	document.getElementById('WetsuwetenGraph').style.display = 'none';
	document.getElementById('SaikuzGraph').style.display = 'none';
	document.getElementById('NadlehGraph').style.display = 'none';
	document.getElementById('StellatenGraph').style.display = 'inline';
	document.getElementById('WoyenneGraph').style.display = 'none';
	document.getElementById('TachetGraph').style.display = 'none';
	document.getElementById('NeeTahiBuhnGraph').style.display = 'none';
	document.getElementById('CheslattaGraph').style.display = 'none';
	document.getElementById('SkinTyeeGraph').style.display = 'none';
	document.getElementById('TaklaGraph').style.display = 'none';
	document.getElementById('YekoocheGraph').style.display = 'none';
	document.getElementById('FortBabineGraph').style.display = 'none';
	document.getElementById('FireSeasonDescription').innerText = "The location of the Stellat’en community downwind from several of the region’s largest fires in the 2018 season (Nadina Lake, Shovel Lake, Island Lake & Verdun) mean that this community was also affected greatly by smoke. Like the nearby Nadleh Whut’en community, sensitive Stellat’en community members were left exposed for over 20 days, while the rest of the community spent 13 days at unhealthy levels. 3 of these days were ranked as very unhealthy while 1 was ranked as hazardous."
	document.getElementById('FireSeasonDescription2').innerText = " "
	document.getElementById('FireSeasonDescription3').innerText = "An evacuation order was announced, yet communication was once again poor from the provincial government."
	map.setLayoutProperty('BurnsLakeRed', 'visibility', 'none')
	map.setLayoutProperty('WetsuwetenRed', 'visibility', 'none')
	map.setLayoutProperty('SaikuzRed', 'visibility', 'none')
	map.setLayoutProperty('NadlehRed', 'visibility', 'none')
	map.setLayoutProperty('StellatenRed', 'visibility', 'visible')
	map.setLayoutProperty('WoyenneRed', 'visibility', 'none')
	map.setLayoutProperty('TachetRed', 'visibility', 'none')
	map.setLayoutProperty('NeeTahiBuhnRed', 'visibility', 'none')
	map.setLayoutProperty('CheslattaRed', 'visibility', 'none')
	map.setLayoutProperty('SkinTyeeRed', 'visibility', 'none')
	map.setLayoutProperty('TaklaRed', 'visibility', 'none')
	map.setLayoutProperty('YekoocheRed', 'visibility', 'none')
	map.setLayoutProperty('FortBabineRed', 'visibility', 'none')

})

//adjusts sidebar for Lake Babine - Woyenne view if that is selected by user
document.getElementById('lbwoyenne').addEventListener('click', () => {
	document.getElementById('features6').style.display = 'inline';
  map.setLayoutProperty('sensors', 'visibility', 'none');
	document.getElementById('CommunityTitle').innerText = "Lake Babine - Woyenne 2018 Fire Season Review"
	document.getElementById('DaysAbove35').innerText = "Days Above 35 µg/m3 (Unhealthy for Sensitive Groups): 17"
	document.getElementById('DaysAbove55').innerText = "Days Above 55 µg/m3 (Unhealthy): 9"
	document.getElementById('DaysAbove150').innerText = "Days Above 150 µg/m3 (Very Unhealthy): 3"
	document.getElementById('DaysAbove350').innerText = "Days Above 350 µg/m3 (Hazardous): 1"
	document.getElementById("DaysAbove35").style.color = '#FF9900'
	document.getElementById("DaysAbove55").style.color = '#FF0000'
	document.getElementById("DaysAbove150").style.color = '#7030A0'
	document.getElementById("DaysAbove350").style.color = '#660066'
	document.getElementById('BurnsLakeGraph').style.display = 'none';
	document.getElementById('WetsuwetenGraph').style.display = 'none';
	document.getElementById('SaikuzGraph').style.display = 'none';
	document.getElementById('NadlehGraph').style.display = 'none';
	document.getElementById('StellatenGraph').style.display = 'none';
	document.getElementById('WoyenneGraph').style.display = 'inline';
	document.getElementById('TachetGraph').style.display = 'none';
	document.getElementById('NeeTahiBuhnGraph').style.display = 'none';
	document.getElementById('CheslattaGraph').style.display = 'none';
	document.getElementById('SkinTyeeGraph').style.display = 'none';
	document.getElementById('TaklaGraph').style.display = 'none';
	document.getElementById('YekoocheGraph').style.display = 'none';
	document.getElementById('FortBabineGraph').style.display = 'none';
	document.getElementById('FireSeasonDescription').innerText = "The Woyenne (Lake Babine) community faired similarly to the other communities surrounding Burns Lake. Their proximity to several large fires meant that air quality was less than stellar. Sensitive groups were exposed for 17 days in the season, while the rest of the community was exposed to unhealthy air quality for 9 days."
	document.getElementById('FireSeasonDescription2').innerText = " "
	document.getElementById('FireSeasonDescription3').innerText = "Yet, their location relatively upwind of the main fires meant that they escaped the worst of the air quality. While they saw similar patterns to the rest of the CSFS communities, the graph shown above is evidently less extreme than in other communities such as Stellat’en or Nadleh Whut’en."
	map.setLayoutProperty('BurnsLakeRed', 'visibility', 'none')
	map.setLayoutProperty('WetsuwetenRed', 'visibility', 'none')
	map.setLayoutProperty('SaikuzRed', 'visibility', 'none')
	map.setLayoutProperty('NadlehRed', 'visibility', 'none')
	map.setLayoutProperty('StellatenRed', 'visibility', 'none')
	map.setLayoutProperty('WoyenneRed', 'visibility', 'visible')
	map.setLayoutProperty('TachetRed', 'visibility', 'none')
	map.setLayoutProperty('NeeTahiBuhnRed', 'visibility', 'none')
	map.setLayoutProperty('CheslattaRed', 'visibility', 'none')
	map.setLayoutProperty('SkinTyeeRed', 'visibility', 'none')
	map.setLayoutProperty('TaklaRed', 'visibility', 'none')
	map.setLayoutProperty('YekoocheRed', 'visibility', 'none')
	map.setLayoutProperty('FortBabineRed', 'visibility', 'none')

})

//adjusts sidebar for Lake Babine - Tachet view if that is selected by user
document.getElementById('lbtachet').addEventListener('click', () => {
	document.getElementById('features6').style.display = 'inline';
  map.setLayoutProperty('sensors', 'visibility', 'none');
	document.getElementById('CommunityTitle').innerText = "Lake Babine - Tachet 2018 Fire Season Review"
	document.getElementById('DaysAbove35').innerText = "Days Above 35 µg/m3 (Unhealthy for Sensitive Groups): 12"
	document.getElementById('DaysAbove55').innerText = "Days Above 55 µg/m3 (Unhealthy): 7"
	document.getElementById('DaysAbove150').innerText = "Days Above 150 µg/m3 (Very Unhealthy): 1"
	document.getElementById('DaysAbove350').innerText = "Days Above 350 µg/m3 (Hazardous): 0"
	document.getElementById("DaysAbove35").style.color = '#FF9900'
	document.getElementById("DaysAbove55").style.color = '#FF0000'
	document.getElementById("DaysAbove150").style.color = '#7030A0'
	document.getElementById("DaysAbove350").style.color = '#660066'
	document.getElementById('BurnsLakeGraph').style.display = 'none';
	document.getElementById('WetsuwetenGraph').style.display = 'none';
	document.getElementById('SaikuzGraph').style.display = 'none';
	document.getElementById('NadlehGraph').style.display = 'none';
	document.getElementById('StellatenGraph').style.display = 'none';
	document.getElementById('WoyenneGraph').style.display = 'none';
	document.getElementById('TachetGraph').style.display = 'inline';
	document.getElementById('NeeTahiBuhnGraph').style.display = 'none';
	document.getElementById('CheslattaGraph').style.display = 'none';
	document.getElementById('SkinTyeeGraph').style.display = 'none';
	document.getElementById('TaklaGraph').style.display = 'none';
	document.getElementById('YekoocheGraph').style.display = 'none';
	document.getElementById('FortBabineGraph').style.display = 'none';
	document.getElementById('FireSeasonDescription').innerText = "The Tachet (Lake Babine) community were fortunate to be located to the West (and therefore downwind) of the region’s largest fires. Consequently, they were located outside of the worst of the region’s air pollution. Sensitive individuals still needed to be cautious as they experienced 12 days where they were notably at threat. For the rest of the community, 7 days were noted as yielding unhealthy air quality while no days were classed as hazardous."
	document.getElementById('FireSeasonDescription2').innerText = " "
	document.getElementById('FireSeasonDescription3').innerText = "Despite the nation having gotten off lightly in the 2018 fire season, it is still essential that early warning systems are put into place going forward in order to mitigate the damages of poor air quality in future fire seasons."
	map.setLayoutProperty('BurnsLakeRed', 'visibility', 'none')
	map.setLayoutProperty('WetsuwetenRed', 'visibility', 'none')
	map.setLayoutProperty('SaikuzRed', 'visibility', 'none')
	map.setLayoutProperty('NadlehRed', 'visibility', 'none')
	map.setLayoutProperty('StellatenRed', 'visibility', 'none')
	map.setLayoutProperty('WoyenneRed', 'visibility', 'none')
	map.setLayoutProperty('TachetRed', 'visibility', 'visible')
	map.setLayoutProperty('NeeTahiBuhnRed', 'visibility', 'none')
	map.setLayoutProperty('CheslattaRed', 'visibility', 'none')
	map.setLayoutProperty('SkinTyeeRed', 'visibility', 'none')
	map.setLayoutProperty('TaklaRed', 'visibility', 'none')
	map.setLayoutProperty('YekoocheRed', 'visibility', 'none')
	map.setLayoutProperty('FortBabineRed', 'visibility', 'none')

})

//adjusts sidebar for Nee Tahi-Buhn view if that is selected by user
document.getElementById('neetahibuhn').addEventListener('click', () => {
	document.getElementById('features6').style.display = 'inline';
  map.setLayoutProperty('sensors', 'visibility', 'none');
	document.getElementById('CommunityTitle').innerText = "Nee Tahi-Buhn 2018 Fire Season Review"
	document.getElementById('DaysAbove35').innerText = "Days Above 35 µg/m3 (Unhealthy for Sensitive Groups): 16"
	document.getElementById('DaysAbove55').innerText = "Days Above 55 µg/m3 (Unhealthy): 9"
	document.getElementById('DaysAbove150').innerText = "Days Above 150 µg/m3 (Very Unhealthy): 3"
	document.getElementById('DaysAbove350').innerText = "Days Above 350 µg/m3 (Hazardous): 1"
	document.getElementById("DaysAbove35").style.color = '#FF9900'
	document.getElementById("DaysAbove55").style.color = '#FF0000'
	document.getElementById("DaysAbove150").style.color = '#7030A0'
	document.getElementById("DaysAbove350").style.color = '#660066'
	document.getElementById('BurnsLakeGraph').style.display = 'none';
	document.getElementById('WetsuwetenGraph').style.display = 'none';
	document.getElementById('SaikuzGraph').style.display = 'none';
	document.getElementById('NadlehGraph').style.display = 'none';
	document.getElementById('StellatenGraph').style.display = 'none';
	document.getElementById('WoyenneGraph').style.display = 'none';
	document.getElementById('TachetGraph').style.display = 'none';
	document.getElementById('NeeTahiBuhnGraph').style.display = 'inline';
	document.getElementById('CheslattaGraph').style.display = 'none';
	document.getElementById('SkinTyeeGraph').style.display = 'none';
	document.getElementById('TaklaGraph').style.display = 'none';
	document.getElementById('YekoocheGraph').style.display = 'none';
	document.getElementById('FortBabineGraph').style.display = 'none';
	document.getElementById('FireSeasonDescription').innerText = "The communities to the South of Francois Lake were heavily surrounded by 4 of the region’s largest fires (Nadina Lake, Shovel Lake, Island Lake & Verdun), meaning that their air quality was notably affected. Vulnerable individuals were exposed for at least 16 days, while the rest of the community was exposed for at least 9. 1 day was noted as possessing hazardous air quality. "
	document.getElementById('FireSeasonDescription2').innerText = " "
	document.getElementById('FireSeasonDescription3').innerText = "However, the effects were relatively noted in comparison to the communities on the East of the Lake. "
	map.setLayoutProperty('BurnsLakeRed', 'visibility', 'none')
	map.setLayoutProperty('WetsuwetenRed', 'visibility', 'none')
	map.setLayoutProperty('SaikuzRed', 'visibility', 'none')
	map.setLayoutProperty('NadlehRed', 'visibility', 'none')
	map.setLayoutProperty('StellatenRed', 'visibility', 'none')
	map.setLayoutProperty('WoyenneRed', 'visibility', 'none')
	map.setLayoutProperty('TachetRed', 'visibility', 'none')
	map.setLayoutProperty('NeeTahiBuhnRed', 'visibility', 'visible')
	map.setLayoutProperty('CheslattaRed', 'visibility', 'none')
	map.setLayoutProperty('SkinTyeeRed', 'visibility', 'none')
	map.setLayoutProperty('TaklaRed', 'visibility', 'none')
	map.setLayoutProperty('YekoocheRed', 'visibility', 'none')
	map.setLayoutProperty('FortBabineRed', 'visibility', 'none')

})

//adjusts sidebar for Cheslatta view if that is selected by user
document.getElementById('cheslatta').addEventListener('click', () => {
	document.getElementById('features6').style.display = 'inline';
  map.setLayoutProperty('sensors', 'visibility', 'none');
	document.getElementById('CommunityTitle').innerText = "Cheslatta 2018 Fire Season Review"
	document.getElementById('DaysAbove35').innerText = "Days Above 35 µg/m3 (Unhealthy for Sensitive Groups): 16"
	document.getElementById('DaysAbove55').innerText = "Days Above 55 µg/m3 (Unhealthy): 9"
	document.getElementById('DaysAbove150').innerText = "Days Above 150 µg/m3 (Very Unhealthy): 3"
	document.getElementById('DaysAbove350').innerText = "Days Above 350 µg/m3 (Hazardous): 1"
	document.getElementById("DaysAbove35").style.color = '#FF9900'
	document.getElementById("DaysAbove55").style.color = '#FF0000'
	document.getElementById("DaysAbove150").style.color = '#7030A0'
	document.getElementById("DaysAbove350").style.color = '#660066'
	document.getElementById('BurnsLakeGraph').style.display = 'none';
	document.getElementById('WetsuwetenGraph').style.display = 'none';
	document.getElementById('SaikuzGraph').style.display = 'none';
	document.getElementById('NadlehGraph').style.display = 'none';
	document.getElementById('StellatenGraph').style.display = 'none';
	document.getElementById('WoyenneGraph').style.display = 'none';
	document.getElementById('TachetGraph').style.display = 'none';
	document.getElementById('NeeTahiBuhnGraph').style.display = 'none';
	document.getElementById('CheslattaGraph').style.display = 'inline';
	document.getElementById('SkinTyeeGraph').style.display = 'none';
	document.getElementById('TaklaGraph').style.display = 'none';
	document.getElementById('YekoocheGraph').style.display = 'none';
	document.getElementById('FortBabineGraph').style.display = 'none';
	document.getElementById('FireSeasonDescription').innerText = "The communities to the South of Francois Lake were heavily surrounded by 4 of the region’s largest fires (Nadina Lake, Shovel Lake, Island Lake & Verdun), meaning that their air quality was notably affected. Vulnerable individuals were exposed for at least 16 days, while the rest of the community was exposed for at least 9. 1 day was noted as possessing hazardous air quality. "
	document.getElementById('FireSeasonDescription2').innerText = " "
	document.getElementById('FireSeasonDescription3').innerText = "However, the effects were relatively noted in comparison to the communities on the East of the Lake. "
	map.setLayoutProperty('BurnsLakeRed', 'visibility', 'none')
	map.setLayoutProperty('WetsuwetenRed', 'visibility', 'none')
	map.setLayoutProperty('SaikuzRed', 'visibility', 'none')
	map.setLayoutProperty('NadlehRed', 'visibility', 'none')
	map.setLayoutProperty('StellatenRed', 'visibility', 'none')
	map.setLayoutProperty('WoyenneRed', 'visibility', 'none')
	map.setLayoutProperty('TachetRed', 'visibility', 'none')
	map.setLayoutProperty('NeeTahiBuhnRed', 'visibility', 'none')
	map.setLayoutProperty('CheslattaRed', 'visibility', 'visible')
	map.setLayoutProperty('SkinTyeeRed', 'visibility', 'none')
	map.setLayoutProperty('TaklaRed', 'visibility', 'none')
	map.setLayoutProperty('YekoocheRed', 'visibility', 'none')
	map.setLayoutProperty('FortBabineRed', 'visibility', 'none')

})

//adjusts sidebar for Skin Tyee view if that is selected by user
document.getElementById('skintyee').addEventListener('click', () => {
	document.getElementById('features6').style.display = 'inline';
  map.setLayoutProperty('sensors', 'visibility', 'none');
	document.getElementById('CommunityTitle').innerText = "Skin Tyee 2018 Fire Season Review"
	document.getElementById('DaysAbove35').innerText = "Days Above 35 µg/m3 (Unhealthy for Sensitive Groups): 16"
	document.getElementById('DaysAbove55').innerText = "Days Above 55 µg/m3 (Unhealthy): 9"
	document.getElementById('DaysAbove150').innerText = "Days Above 150 µg/m3 (Very Unhealthy): 3"
	document.getElementById('DaysAbove350').innerText = "Days Above 350 µg/m3 (Hazardous): 1"
	document.getElementById("DaysAbove35").style.color = '#FF9900'
	document.getElementById("DaysAbove55").style.color = '#FF0000'
	document.getElementById("DaysAbove150").style.color = '#7030A0'
	document.getElementById("DaysAbove350").style.color = '#660066'
	document.getElementById('BurnsLakeGraph').style.display = 'none';
	document.getElementById('WetsuwetenGraph').style.display = 'none';
	document.getElementById('SaikuzGraph').style.display = 'none';
	document.getElementById('NadlehGraph').style.display = 'none';
	document.getElementById('StellatenGraph').style.display = 'none';
	document.getElementById('WoyenneGraph').style.display = 'none';
	document.getElementById('TachetGraph').style.display = 'none';
	document.getElementById('NeeTahiBuhnGraph').style.display = 'none';
	document.getElementById('CheslattaGraph').style.display = 'none';
	document.getElementById('SkinTyeeGraph').style.display = 'inline';
	document.getElementById('TaklaGraph').style.display = 'none';
	document.getElementById('YekoocheGraph').style.display = 'none';
	document.getElementById('FortBabineGraph').style.display = 'none';
	document.getElementById('FireSeasonDescription').innerText = "The communities to the South of Francois Lake were heavily surrounded by 4 of the region’s largest fires (Nadina Lake, Shovel Lake, Island Lake & Verdun), meaning that their air quality was notably affected. Vulnerable individuals were exposed for at least 16 days, while the rest of the community was exposed for at least 9. 1 day was noted as possessing hazardous air quality. "
	document.getElementById('FireSeasonDescription2').innerText = " "
	document.getElementById('FireSeasonDescription3').innerText = "However, the effects were relatively noted in comparison to the communities on the East of the Lake. "
	map.setLayoutProperty('BurnsLakeRed', 'visibility', 'none')
	map.setLayoutProperty('WetsuwetenRed', 'visibility', 'none')
	map.setLayoutProperty('SaikuzRed', 'visibility', 'none')
	map.setLayoutProperty('NadlehRed', 'visibility', 'none')
	map.setLayoutProperty('StellatenRed', 'visibility', 'none')
	map.setLayoutProperty('WoyenneRed', 'visibility', 'none')
	map.setLayoutProperty('TachetRed', 'visibility', 'none')
	map.setLayoutProperty('NeeTahiBuhnRed', 'visibility', 'none')
	map.setLayoutProperty('CheslattaRed', 'visibility', 'none')
	map.setLayoutProperty('SkinTyeeRed', 'visibility', 'visible')
	map.setLayoutProperty('TaklaRed', 'visibility', 'none')
	map.setLayoutProperty('YekoocheRed', 'visibility', 'none')
	map.setLayoutProperty('FortBabineRed', 'visibility', 'none')

})

//adjusts sidebar for Takla Lake view if that is selected by user
document.getElementById('taklalake').addEventListener('click', () => {
	document.getElementById('features6').style.display = 'inline';
  map.setLayoutProperty('sensors', 'visibility', 'none');
	document.getElementById('CommunityTitle').innerText = "Takla Lake 2018 Fire Season Review"
	document.getElementById('DaysAbove35').innerText = "Days Above 35 µg/m3 (Unhealthy for Sensitive Groups): 15"
	document.getElementById('DaysAbove55').innerText = "Days Above 55 µg/m3 (Unhealthy): 7"
	document.getElementById('DaysAbove150').innerText = "Days Above 150 µg/m3 (Very Unhealthy): 2"
	document.getElementById('DaysAbove350').innerText = "Days Above 350 µg/m3 (Hazardous): 0"
	document.getElementById("DaysAbove35").style.color = '#FF9900'
	document.getElementById("DaysAbove55").style.color = '#FF0000'
	document.getElementById("DaysAbove150").style.color = '#7030A0'
	document.getElementById("DaysAbove350").style.color = '#660066'
	document.getElementById('BurnsLakeGraph').style.display = 'none';
	document.getElementById('WetsuwetenGraph').style.display = 'none';
	document.getElementById('SaikuzGraph').style.display = 'none';
	document.getElementById('NadlehGraph').style.display = 'none';
	document.getElementById('StellatenGraph').style.display = 'none';
	document.getElementById('WoyenneGraph').style.display = 'none';
	document.getElementById('TachetGraph').style.display = 'none';
	document.getElementById('NeeTahiBuhnGraph').style.display = 'none';
	document.getElementById('CheslattaGraph').style.display = 'none';
	document.getElementById('SkinTyeeGraph').style.display = 'none';
	document.getElementById('TaklaGraph').style.display = 'inline';
	document.getElementById('YekoocheGraph').style.display = 'none';
	document.getElementById('FortBabineGraph').style.display = 'none';
	document.getElementById('FireSeasonDescription').innerText = "The Takla community were fortunate to be located to the North of the region’s largest fires. Consequently, they were located outside of the worst of the region’s air pollution. Sensitive individuals still needed to be cautious as they experienced 15 days where they were notably at threat. For the rest of the community, 7 days were noted as yielding unhealthy air quality while no days were classed as hazardous."
	document.getElementById('FireSeasonDescription2').innerText = " "
	document.getElementById('FireSeasonDescription3').innerText = "Despite the nation having gotten off lightly in the 2018 fire season, it is still essential that early warning systems are put into place going forward in order to mitigate the damages of poor air quality in future fire seasons."
	map.setLayoutProperty('BurnsLakeRed', 'visibility', 'none')
	map.setLayoutProperty('WetsuwetenRed', 'visibility', 'none')
	map.setLayoutProperty('SaikuzRed', 'visibility', 'none')
	map.setLayoutProperty('NadlehRed', 'visibility', 'none')
	map.setLayoutProperty('StellatenRed', 'visibility', 'none')
	map.setLayoutProperty('WoyenneRed', 'visibility', 'none')
	map.setLayoutProperty('TachetRed', 'visibility', 'none')
	map.setLayoutProperty('NeeTahiBuhnRed', 'visibility', 'none')
	map.setLayoutProperty('CheslattaRed', 'visibility', 'none')
	map.setLayoutProperty('SkinTyeeRed', 'visibility', 'none')
	map.setLayoutProperty('TaklaRed', 'visibility', 'visible')
	map.setLayoutProperty('YekoocheRed', 'visibility', 'none')
	map.setLayoutProperty('FortBabineRed', 'visibility', 'none')

})

//adjusts sidebar for Yekooche view if that is selected by user
document.getElementById('yekooche').addEventListener('click', () => {
	document.getElementById('features6').style.display = 'inline';
  map.setLayoutProperty('sensors', 'visibility', 'none');
	document.getElementById('CommunityTitle').innerText = "Yekooche 2018 Fire Season Review"
	document.getElementById('DaysAbove35').innerText = "Days Above 35 µg/m3 (Unhealthy for Sensitive Groups): 19"
	document.getElementById('DaysAbove55').innerText = "Days Above 55 µg/m3 (Unhealthy): 13"
	document.getElementById('DaysAbove150').innerText = "Days Above 150 µg/m3 (Very Unhealthy): 3"
	document.getElementById('DaysAbove350').innerText = "Days Above 350 µg/m3 (Hazardous): 1"
	document.getElementById("DaysAbove35").style.color = '#FF9900'
	document.getElementById("DaysAbove55").style.color = '#FF0000'
	document.getElementById("DaysAbove150").style.color = '#7030A0'
	document.getElementById("DaysAbove350").style.color = '#660066'
	document.getElementById('BurnsLakeGraph').style.display = 'none';
	document.getElementById('WetsuwetenGraph').style.display = 'none';
	document.getElementById('SaikuzGraph').style.display = 'none';
	document.getElementById('NadlehGraph').style.display = 'none';
	document.getElementById('StellatenGraph').style.display = 'none';
	document.getElementById('WoyenneGraph').style.display = 'none';
	document.getElementById('TachetGraph').style.display = 'none';
	document.getElementById('NeeTahiBuhnGraph').style.display = 'none';
	document.getElementById('CheslattaGraph').style.display = 'none';
	document.getElementById('SkinTyeeGraph').style.display = 'none';
	document.getElementById('TaklaGraph').style.display = 'none';
	document.getElementById('YekoocheGraph').style.display = 'inline';
	document.getElementById('FortBabineGraph').style.display = 'none';
	document.getElementById('FireSeasonDescription').innerText = "The Yekooche community is located due north of the Shovel Lake wildfire and their air quality in the summer of 2018 reflected that accordingly. While the community did not experience the extremes that the Stellat’en or Nadleh Whut’en did, they experienced a sustained unhealthy level of air pollution for 13 days (19 days for sensitive individuals). There was at least one hazardous day, and 3 were classed as very unhealthy."
	document.getElementById('FireSeasonDescription2').innerText = " "
	document.getElementById('FireSeasonDescription3').innerText = "Communication was once again poor from the provincial government and impacted decision making in the community."
	map.setLayoutProperty('BurnsLakeRed', 'visibility', 'none')
	map.setLayoutProperty('WetsuwetenRed', 'visibility', 'none')
	map.setLayoutProperty('SaikuzRed', 'visibility', 'none')
	map.setLayoutProperty('NadlehRed', 'visibility', 'none')
	map.setLayoutProperty('StellatenRed', 'visibility', 'none')
	map.setLayoutProperty('WoyenneRed', 'visibility', 'none')
	map.setLayoutProperty('TachetRed', 'visibility', 'none')
	map.setLayoutProperty('NeeTahiBuhnRed', 'visibility', 'none')
	map.setLayoutProperty('CheslattaRed', 'visibility', 'none')
	map.setLayoutProperty('SkinTyeeRed', 'visibility', 'none')
	map.setLayoutProperty('TaklaRed', 'visibility', 'none')
	map.setLayoutProperty('YekoocheRed', 'visibility', 'visible')
	map.setLayoutProperty('FortBabineRed', 'visibility', 'none')

})

//adjusts sidebar for Fort Babine view if that is selected by user
document.getElementById('fortbabine').addEventListener('click', () => {
	document.getElementById('features6').style.display = 'inline';
  map.setLayoutProperty('sensors', 'visibility', 'none');
	document.getElementById('CommunityTitle').innerText = "Fort Babine 2018 Fire Season Review"
	document.getElementById('DaysAbove35').innerText = "Days Above 35 µg/m3 (Unhealthy for Sensitive Groups): 6"
	document.getElementById('DaysAbove55').innerText = "Days Above 55 µg/m3 (Unhealthy): 3"
	document.getElementById('DaysAbove150').innerText = "Days Above 150 µg/m3 (Very Unhealthy): 1"
	document.getElementById('DaysAbove350').innerText = "Days Above 350 µg/m3 (Hazardous): 0"
	document.getElementById("DaysAbove35").style.color = '#FF9900'
	document.getElementById("DaysAbove55").style.color = '#FF0000'
	document.getElementById("DaysAbove150").style.color = '#7030A0'
	document.getElementById("DaysAbove350").style.color = '#660066'
	document.getElementById('BurnsLakeGraph').style.display = 'none';
	document.getElementById('WetsuwetenGraph').style.display = 'none';
	document.getElementById('SaikuzGraph').style.display = 'none';
	document.getElementById('NadlehGraph').style.display = 'none';
	document.getElementById('StellatenGraph').style.display = 'none';
	document.getElementById('WoyenneGraph').style.display = 'none';
	document.getElementById('TachetGraph').style.display = 'none';
	document.getElementById('NeeTahiBuhnGraph').style.display = 'none';
	document.getElementById('CheslattaGraph').style.display = 'none';
	document.getElementById('SkinTyeeGraph').style.display = 'none';
	document.getElementById('TaklaGraph').style.display = 'none';
	document.getElementById('YekoocheGraph').style.display = 'none';
	document.getElementById('FortBabineGraph').style.display = 'inline';
	document.getElementById('FireSeasonDescription').innerText = "The Fort Babine community were fortunate to be located to the West (and therefore downwind) of the region’s largest fires. Consequently, they were located outside of the worst of the region’s air pollution. Sensitive individuals still needed to be cautious as they experienced 6 days where they were notably at threat. For the rest of the community, 3 days were noted as yielding unhealthy air quality while no days were classed as hazardous."
	document.getElementById('FireSeasonDescription2').innerText = " "
	document.getElementById('FireSeasonDescription3').innerText = "Despite the nation having gotten off lightly in the 2018 fire season, it is still essential that early warning systems are put into place going forward in order to mitigate the damages of poor air quality in future fire seasons."
	map.setLayoutProperty('BurnsLakeRed', 'visibility', 'none')
	map.setLayoutProperty('WetsuwetenRed', 'visibility', 'none')
	map.setLayoutProperty('SaikuzRed', 'visibility', 'none')
	map.setLayoutProperty('NadlehRed', 'visibility', 'none')
	map.setLayoutProperty('StellatenRed', 'visibility', 'none')
	map.setLayoutProperty('WoyenneRed', 'visibility', 'none')
	map.setLayoutProperty('TachetRed', 'visibility', 'none')
	map.setLayoutProperty('NeeTahiBuhnRed', 'visibility', 'none')
	map.setLayoutProperty('CheslattaRed', 'visibility', 'none')
	map.setLayoutProperty('SkinTyeeRed', 'visibility', 'none')
	map.setLayoutProperty('TaklaRed', 'visibility', 'none')
	map.setLayoutProperty('YekoocheRed', 'visibility', 'none')
	map.setLayoutProperty('FortBabineRed', 'visibility', 'visible')

})

//Fire Data/////////////////////////////////////////////////////////////////////
//loads the point data of the air quality sensors
map.on('load', () => {
map.addSource('fire_points', {
type: 'geojson',
// Use a URL for the value for the `data` property.
data: 'https://raw.githubusercontent.com/camplabpr/CSFS-maps/main/Merged_Fire_Hotspots.geojson'
});

map.addLayer({
'id': 'fire_points_layer',
'type': 'circle',
'source': 'fire_points',
'paint': {
'circle-radius': 6,
'circle-color': '#FF6347'},
filter:  ['==', ['number', ['get', 'Week_Number']], 1] //set to first week of fire season
});
map.moveLayer('fire_points_layer', 'communities');
});



//DropDown Zooms
	document.getElementById('burnslake').addEventListener('click', () => {
  		map.flyTo({
				center: [-125.76719284057619,54.23674151771537],
				zoom:10,
				essential: true});
			map.setLayoutProperty('treaty-boundaries', 'visibility', 'none');
			document.getElementById("myDropdown").classList.remove("show");
})
document.getElementById('wetsuweten').addEventListener('click', () => {
		map.flyTo({
			center: [-125.88220596313475,54.326735363462106],
			zoom:10,
			essential: true});
		map.setLayoutProperty('treaty-boundaries', 'visibility', 'none');
		document.getElementById("myDropdown").classList.remove("show");
})
document.getElementById('saikuz').addEventListener('click', () => {
		map.flyTo({
			center: [-124.06911849975586,53.95992359899387],
			zoom:10,
			essential: true});
		map.setLayoutProperty('treaty-boundaries', 'visibility', 'none');
		document.getElementById("myDropdown").classList.remove("show");
})
document.getElementById('nadleh').addEventListener('click', () => {
		map.flyTo({
			center: [-124.60976600646973,54.07344097398336],
			zoom:10,
			essential: true});
		map.setLayoutProperty('treaty-boundaries', 'visibility', 'none');
		document.getElementById("myDropdown").classList.remove("show");
})
document.getElementById('stellaten').addEventListener('click', () => {
		map.flyTo({
			center: [-124.90854263305664,54.06107551573467],
			zoom:10,
			essential: true});
		map.setLayoutProperty('treaty-boundaries', 'visibility', 'none');
		document.getElementById("myDropdown").classList.remove("show");
})
document.getElementById('lbwoyenne').addEventListener('click', () => {
		map.flyTo({
			center: [-125.76358795166016,54.253592732719106],
			zoom:10,
			essential: true});
		map.setLayoutProperty('treaty-boundaries', 'visibility', 'none');
		document.getElementById("myDropdown").classList.remove("show");
})
document.getElementById('lbtachet').addEventListener('click', () => {
		map.flyTo({
			center: [-126.14690780639648,54.81681041595936],
			zoom:10,
			essential: true});
		map.setLayoutProperty('treaty-boundaries', 'visibility', 'none');
		document.getElementById("myDropdown").classList.remove("show");
})
document.getElementById('neetahibuhn').addEventListener('click', () => {
		map.flyTo({
			center: [-125.80461502075194,54.02209142616588],
			zoom:10,
			essential: true});
		map.setLayoutProperty('treaty-boundaries', 'visibility', 'none');
		document.getElementById("myDropdown").classList.remove("show");
})
document.getElementById('cheslatta').addEventListener('click', () => {
		map.flyTo({
			center: [-125.7685661315918,54.02057870158285],
			zoom:10.3,
			essential: true});
		map.setLayoutProperty('treaty-boundaries', 'visibility', 'none');
		document.getElementById("myDropdown").classList.remove("show");
})
document.getElementById('skintyee').addEventListener('click', () => {
		map.flyTo({
			center: [-125.73131561279297,54.015132437554136],
			zoom:10.3,
			essential: true});
		map.setLayoutProperty('treaty-boundaries', 'visibility', 'none');
		document.getElementById("myDropdown").classList.remove("show");
})
document.getElementById('taklalake').addEventListener('click', () => {
		map.flyTo({
			center: [-125.86761474609374,55.441479359140686],
			zoom:10,
			essential: true});
		map.setLayoutProperty('treaty-boundaries', 'visibility', 'none');
		document.getElementById("myDropdown").classList.remove("show");
})
document.getElementById('yekooche').addEventListener('click', () => {
		map.flyTo({
			center: [-125.08140563964844,54.59892007568796],
			zoom:10,
			essential: true});
		map.setLayoutProperty('treaty-boundaries', 'visibility', 'none');
		document.getElementById("myDropdown").classList.remove("show");
})
document.getElementById('fortbabine').addEventListener('click', () => {
		map.flyTo({
			center: [-126.62532806396483,55.31996410374263],
			zoom:10,
			essential: true});
		map.setLayoutProperty('treaty-boundaries', 'visibility', 'none');
		document.getElementById("myDropdown").classList.remove("show");
})

//Mechanics for the interactive hover box in the top right of the map
map.on('mousemove', (event) => {
							  const fires1 = map.queryRenderedFeatures(event.point, {
							  layers: ['Fires_CSFS']
							  });
							  document.getElementById('FirePopup').innerHTML = fires1.length
							    ? `<p><strong><em></strong><b>Colloquial Fire Name:   </b>${fires1[0].properties.Fire_Names_For_Updating_Fire_Names_2018_COLLOQUIAL_NAME}</em></p>
									<p><strong><em></strong><b>Hectares Burned:   </b>${fires1[0].properties.SIZE_HA} ha</em></p>
									<p><strong><em></strong><b>Date Started:   </b>${fires1[0].properties.Fire_Dates_FIRE_START_DATE}</em></p>
									<p><strong><em></strong><b>Date Out:   </b>${fires1[0].properties.Date_Out_DATE_OUT}</em></p>`
							    : `<p><b>Colloquial Fire Name:<br><br>
										Hectares Burned:<br><br>
										Date Started: <br><br>
										Date Out:</p>`;
							});

// filters and time slider
function weeks_dates(week) {
	let week_text;
	if (week == 1) {
		week_text = "4/15/2018"
	} else if (week == 2) {
		week_text = "4/22/2018"
	} else if (week == 3) {
		week_text = "4/29/2018"
	} else if (week == 4) {
		week_text = "5/6/2018"
	} else if (week == 5) {
		week_text = "5/13/2018"
	} else if (week == 6) {
		week_text = "5/20/2018"
	} else if (week == 7) {
		week_text = "5/27/2018"
	} else if (week == 8) {
		week_text = "6/3/2018"
	} else if (week == 9) {
		week_text = "6/10/2018"
	} else if (week == 10) {
		week_text = "6/17/2018"
	} else if (week == 11) {
		week_text = "6/24/2018"
	} else if (week == 12) {
		week_text = "7/1/2018"
	} else if (week == 13) {
		week_text = "7/8/2018"
	} else if (week == 14) {
		week_text = "7/15/2018"
	} else if (week == 15) {
		week_text = "7/22/2018"
	} else if (week == 16) {
		week_text = "7/29/2018"
	} else if (week == 17) {
		week_text = "8/5/2018"
	} else if (week == 18) {
		week_text = "8/12/2018"
	} else if (week == 19) {
		week_text = "8/19/2018"
	} else if (week == 20) {
		week_text = "8/26/2018"
	} else if (week == 21) {
		week_text = "9/2/2018"
	} else if (week == 22) {
		week_text = "9/9/2018"
	} else if (week == 23) {
		week_text = "9/16/2018"
	} else if (week == 24) {
		week_text = "9/23/2018"
	} else if (week == 25) {
		week_text = "9/30/2018"
	} else if (week == 26) {
		week_text = "10/7/2018"
	} else if (week == 27) {
		week_text = "10/14/2018"
	} else if (week == 28) {
		week_text = "10/21/2018"
	} else if (week == 29) {
		week_text = "10/28/2018"
	} else if (week == 30) {
		week_text = "11/4/2018"
	} else if (week == 31) {
		week_text = "11/11/2018"
	} else if (week == 32) {
		week_text = "11/18/2018"
	} else if (week == 33) {
		week_text = "11/25/2018"
	} else if (week == 34) {
		week_text = "12/2/2018"
	} else if (week == 35) {
		week_text = "12/9/2018"
	} else if (week == 36) {
		week_text = "12/16/2018"
	} else if (week == 37) {
		week_text = "12/23/2018"
	} 
	return week_text
};

//filter for slider to ensure air quality and fire polygons are accurate
document.getElementById('slider').addEventListener('input', (e) => {
		const week = parseInt(e.target.value);

		var FireFilter=[
		    "all",
		    ['<=', ['number', ['get', 'Fire_Weeks_Week_Out']], week]
		]

		map.setFilter("Fires_CSFS", FireFilter)
		document.getElementById('active-date').innerText = weeks_dates(week)
	});

	document.getElementById('slider').addEventListener('input', (e) => {
			const week2 = parseInt(e.target.value);

			var PollutionFilter=[
			    "all",
			    ['==', ['number', ['get', 'Week_Number']], week2]
			]

			map.setFilter("PM25_2018", PollutionFilter)
		});

    document.getElementById('slider').addEventListener('input', (e) => {
  			const week3 = parseInt(e.target.value);

  			var FirePointFilter=[
  			    "all",
  			    ['==', ['number', ['get', 'Week_Number']], week3]
  			]

  			map.setFilter("fire_points_layer", FirePointFilter)
  		});

	//Scale bar
	const scale = new mapboxgl.ScaleControl({
    maxWidth: 200	,
    unit: 'imperial'
	});
	map.addControl(scale);

	scale.setUnit('metric');

	//Community info boxes
	map.on('click', 'communities', (e) => {
// Copy coordinates array.
		const coordinates = e.features[0].geometry.coordinates.slice();
		const description = e.features[0].properties.Name;

// Ensure that if the map is zoomed out such that multiple
// copies of the feature are visible, the popup appears
// over the copy being pointed to.
		while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
			coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
		}

		new mapboxgl.Popup()
		.setLngLat(coordinates)
		.setHTML(description)
		.addTo(map);


// Change the cursor to a pointer when the mouse is over the places layer.
		map.on('mouseenter', 'communities', () => {
		map.getCanvas().style.cursor = 'pointer';
	});

// Change it back to a pointer when it leaves.
		map.on('mouseleave', 'communities', () => {
		map.getCanvas().style.cursor = '';
	});
});

//end of script
</script>
</body>
</html>
